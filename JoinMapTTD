PosClick = {
    ["Easy"] = {265, 360},
    ["Medium"] = {410, 360},
    ["Hard"] = {523, 360},
    ["Nightmare"] = {700, 360}
}
repeat
    wait()
until game:IsLoaded()

repeat
    wait()
until game.Players.LocalPlayer
plr = game.Players.LocalPlayer
repeat
    wait()
until plr.Character

repeat
    wait()
until plr.Character:FindFirstChild("HumanoidRootPart")
repeat
    wait()
until plr.Character:FindFirstChild("Humanoid")

game:GetService("VirtualInputManager"):SendKeyEvent(true, "Tab", false, game)
function ClickButton(x, y)
    game:GetService("VirtualInputManager"):SendMouseButtonEvent(x, y, 0, true, game, 1)
    game:GetService("VirtualInputManager"):SendMouseButtonEvent(x, y, 0, false, game, 1)
end

if game.GameId == 4778845442 then
    if game.PlaceId == 13775256536 then
        spawn(
            function()
                while wait() do
                    game:GetService("Players").LocalPlayer.PlayerGui.Lobby.RejoinMatch.Visible = false
                    game:GetService("Players").LocalPlayer.PlayerGui.MainFrames.NotificationFrame.Visible = false
                end
            end
        )
        function GetEmptyTeleport()
            for i, v in pairs(game.Workspace.Lifts:GetChildren()) do
                if v.Name == _G.Map then
                    if
                        string.find(v.BasePart.StatusGui.PlayersCount.Text, "0/") and
                            not string.find(v.BasePart.StatusGui.PlayersCount.Text, "100")
                     then
                        return v
                    end
                end
            end
            return nil
        end
        while wait() do
            local v = GetEmptyTeleport() -- Get the teleport directly
            if v then
                print(v)
                if game:GetService("Players").LocalPlayer.PlayerGui.Lobby.QueueFrame.Visible then
                    ClickButton(477, 390)
                else
                    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.BasePart.CFrame
                end
            end
        end
    else
        vote = false
        spawn(
            function()
                repeat
                    wait()
                until game:IsLoaded()
                wait(20 * 60)
                game:Shutdown()
            end
        )
        if game:GetService("Players").LocalPlayer.PlayerGui.VotingFrame.VoteFrame.Visible then
            repeat
                wait()
                ClickButton(_G.PosClick[_G.Mode][1], _G.PosClick[_G.Mode][2])
            until not game:GetService("Players").LocalPlayer.PlayerGui.VotingFrame.VoteFrame.Visible
            vote = true
        end
        if vote == false then
            game:Shutdown()
        end
        repeat
            wait()
            ClickButton(515, 35)
            wait(.4)
        until game:GetService("Players").LocalPlayer.PlayerGui.Match.WaveInfo.AutoSkip.OnAndOff.BackgroundColor3 ==
            Color3.fromRGB(0, 255, 0)
        repeat
            wait()
        until game:GetService("Players").LocalPlayer.PlayerGui.Match.MatchFinish.Visible
        repeat
            wait()
            ClickButton(660, 380)
            wait(.5)
        until game:GetService("Players").LocalPlayer.PlayerGui.Match.MatchFinish.MatchFinishFrame.EndOptions.PlayAgain.ButtonFrame.PlayAgainButton.Text ~=
            "Play Again"
    end
end
